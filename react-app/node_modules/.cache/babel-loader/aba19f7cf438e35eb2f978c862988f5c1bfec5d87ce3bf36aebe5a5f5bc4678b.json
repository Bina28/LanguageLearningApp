{"ast":null,"code":"import React,{createContext,useContext,useEffect,useState}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";const UserProgressContext=/*#__PURE__*/createContext(undefined);export const UserProgressProvider=_ref=>{let{children}=_ref;const[completedUnits,setCompletedUnits]=useState(0);const refreshProgress=async()=>{try{const userString=localStorage.getItem(\"user\");if(!userString)return;const user=JSON.parse(userString);const userId=user.id;const apiUrl=process.env.REACT_APP_API_URL;const response=await axios.get(\"\".concat(apiUrl,\"/api/learning/progress/\").concat(userId));setCompletedUnits(response.data.completedUnits);}catch(error){console.error(\"Error fetching completed units:\",error);}};useEffect(()=>{refreshProgress();},[]);return/*#__PURE__*/_jsx(UserProgressContext.Provider,{value:{completedUnits,refreshProgress},children:children});};export const useUserProgress=()=>{const context=useContext(UserProgressContext);if(!context){throw new Error(\"useUserProgress must be used within a UserProgressProvider\");}return context;};","map":{"version":3,"names":["React","createContext","useContext","useEffect","useState","axios","jsx","_jsx","UserProgressContext","undefined","UserProgressProvider","_ref","children","completedUnits","setCompletedUnits","refreshProgress","userString","localStorage","getItem","user","JSON","parse","userId","id","apiUrl","process","env","REACT_APP_API_URL","response","get","concat","data","error","console","Provider","value","useUserProgress","context","Error"],"sources":["C:/Users/dyako/OneDrive/Skrivebord/StudyProjects/LanguageLearningApp/react-app/src/Components/UserProgressContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\ninterface UserProgressContextType {\r\n  completedUnits: number;\r\n  refreshProgress: () => void;\r\n}\r\n\r\nconst UserProgressContext = createContext<UserProgressContextType | undefined>(undefined);\r\n\r\nexport const UserProgressProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\r\n  const [completedUnits, setCompletedUnits] = useState<number>(0);\r\n\r\n  const refreshProgress = async () => {\r\n    try {\r\n      const userString = localStorage.getItem(\"user\");\r\n      if (!userString) return;\r\n\r\n      const user = JSON.parse(userString);\r\n      const userId = user.id;\r\n      const apiUrl = process.env.REACT_APP_API_URL;\r\n      const response = await axios.get<{ completedUnits: number }>(\r\n        `${apiUrl}/api/learning/progress/${userId}`\r\n      );\r\n\r\n      setCompletedUnits(response.data.completedUnits);\r\n    } catch (error) {\r\n      console.error(\"Error fetching completed units:\", error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    refreshProgress();\r\n  }, []);\r\n\r\n  return (\r\n    <UserProgressContext.Provider value={{ completedUnits, refreshProgress }}>\r\n      {children}\r\n    </UserProgressContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useUserProgress = () => {\r\n  const context = useContext(UserProgressContext);\r\n  if (!context) {\r\n    throw new Error(\"useUserProgress must be used within a UserProgressProvider\");\r\n  }\r\n  return context;\r\n};\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC7E,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAO1B,KAAM,CAAAC,mBAAmB,cAAGP,aAAa,CAAsCQ,SAAS,CAAC,CAEzF,MAAO,MAAM,CAAAC,oBAA6D,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACxF,KAAM,CAACE,cAAc,CAAEC,iBAAiB,CAAC,CAAGV,QAAQ,CAAS,CAAC,CAAC,CAE/D,KAAM,CAAAW,eAAe,CAAG,KAAAA,CAAA,GAAY,CAClC,GAAI,CACF,KAAM,CAAAC,UAAU,CAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAC/C,GAAI,CAACF,UAAU,CAAE,OAEjB,KAAM,CAAAG,IAAI,CAAGC,IAAI,CAACC,KAAK,CAACL,UAAU,CAAC,CACnC,KAAM,CAAAM,MAAM,CAAGH,IAAI,CAACI,EAAE,CACtB,KAAM,CAAAC,MAAM,CAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,CAC5C,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAvB,KAAK,CAACwB,GAAG,IAAAC,MAAA,CAC3BN,MAAM,4BAAAM,MAAA,CAA0BR,MAAM,CAC3C,CAAC,CAEDR,iBAAiB,CAACc,QAAQ,CAACG,IAAI,CAAClB,cAAc,CAAC,CACjD,CAAE,MAAOmB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,iCAAiC,CAAEA,KAAK,CAAC,CACzD,CACF,CAAC,CAED7B,SAAS,CAAC,IAAM,CACdY,eAAe,CAAC,CAAC,CACnB,CAAC,CAAE,EAAE,CAAC,CAEN,mBACER,IAAA,CAACC,mBAAmB,CAAC0B,QAAQ,EAACC,KAAK,CAAE,CAAEtB,cAAc,CAAEE,eAAgB,CAAE,CAAAH,QAAA,CACtEA,QAAQ,CACmB,CAAC,CAEnC,CAAC,CAED,MAAO,MAAM,CAAAwB,eAAe,CAAGA,CAAA,GAAM,CACnC,KAAM,CAAAC,OAAO,CAAGnC,UAAU,CAACM,mBAAmB,CAAC,CAC/C,GAAI,CAAC6B,OAAO,CAAE,CACZ,KAAM,IAAI,CAAAC,KAAK,CAAC,4DAA4D,CAAC,CAC/E,CACA,MAAO,CAAAD,OAAO,CAChB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}