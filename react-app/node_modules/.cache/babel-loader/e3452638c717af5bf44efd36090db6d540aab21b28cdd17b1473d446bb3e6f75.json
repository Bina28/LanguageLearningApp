{"ast":null,"code":"import axios from\"axios\";import{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import\"./Courses.css\";import{useUserProgress}from\"../UserProgressContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Courses(){const{completedUnits}=useUserProgress();const[courses,setCourses]=useState([]);const navigate=useNavigate();const[page,setPage]=useState(1);const pageSize=10;const[totalPages,setTotalPages]=useState(1);const[searchQuery,setSearchQuery]=useState(\"\");const fetchCourses=async()=>{try{const apiUrl=process.env.REACT_APP_API_URL;const endpoint=searchQuery?`${apiUrl}/api/learning/search`:`${apiUrl}/api/learning/courses`;const response=await axios.get(endpoint,{params:searchQuery?{searchQuery}:{pageIndex:page,pageSize}});console.log(\"API Response:\",response.data);setCourses(response.data.data.items||response.data.data);setTotalPages(response.data.data.totalPages||1);}catch(error){console.error(\"Error fetching courses: \",error);}};useEffect(()=>{const delayDebounceFn=setTimeout(()=>{fetchCourses();},300);return()=>clearTimeout(delayDebounceFn);},[searchQuery,page]);return/*#__PURE__*/_jsxs(\"div\",{className:\"courses-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pagination-search-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pagination\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPage(1),disabled:page===1,children:\"First\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPage(prev=>Math.max(prev-1,1)),disabled:page===1,children:\"Previous\"}),[...Array(totalPages)].map((_,i)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPage(i+1),className:page===i+1?\"active\":\"\",children:i+1},i+1)),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPage(prev=>Math.min(prev+1,totalPages)),disabled:page===totalPages,children:\"Next\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPage(totalPages),disabled:page===totalPages,children:\"Last\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"search-container\",children:/*#__PURE__*/_jsx(\"input\",{className:\"search-input\",type:\"text\",placeholder:\"Search courses...\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value)})})]}),/*#__PURE__*/_jsx(\"h2\",{className:\"course-title\",children:\"Available Courses\"}),/*#__PURE__*/_jsx(\"div\",{className:\"courses-grid\",children:courses.map(course=>{const isLocked=course.courseId>completedUnits+1;return/*#__PURE__*/_jsxs(\"div\",{className:`course-card ${isLocked?\"locked\":\"\"}`,onClick:()=>!isLocked&&navigate(`/courses/${course.courseId}`),children:[isLocked&&/*#__PURE__*/_jsx(\"span\",{className:\"lock-icon\",children:\"\\uD83D\\uDD12\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"course-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"course-index\",children:[\"Unit \",course.courseId]}),/*#__PURE__*/_jsx(\"div\",{className:\"course-name\",children:course.title}),/*#__PURE__*/_jsx(\"div\",{className:\"course-description\",children:course.description})]})]},course.courseId);})})]});}","map":{"version":3,"names":["axios","useEffect","useState","useNavigate","useUserProgress","jsx","_jsx","jsxs","_jsxs","Courses","completedUnits","courses","setCourses","navigate","page","setPage","pageSize","totalPages","setTotalPages","searchQuery","setSearchQuery","fetchCourses","apiUrl","process","env","REACT_APP_API_URL","endpoint","response","get","params","pageIndex","console","log","data","items","error","delayDebounceFn","setTimeout","clearTimeout","className","children","onClick","disabled","prev","Math","max","Array","map","_","i","min","type","placeholder","value","onChange","e","target","course","isLocked","courseId","title","description"],"sources":["C:/Users/dyako/OneDrive/Skrivebord/StudyProjects/LanguageLearningApp/react-app/src/Components/Courses/Courses.tsx"],"sourcesContent":["import axios from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport \"./Courses.css\";\r\nimport { useUserProgress } from \"../UserProgressContext\";\r\n\r\ninterface Course {\r\n  courseId: number;\r\n  description: string;\r\n  title: string;\r\n}\r\n\r\ninterface ApiResponse<T> {\r\n  success: boolean;\r\n  message: string | null;\r\n  data: T;\r\n}\r\n\r\nexport default function Courses() {\r\n  const { completedUnits } = useUserProgress();\r\n  const [courses, setCourses] = useState<Course[]>([]);\r\n  const navigate = useNavigate();\r\n  const [page, setPage] = useState(1);\r\n  const pageSize = 10;\r\n  const [totalPages, setTotalPages] = useState(1);\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const fetchCourses = async () => {\r\n    try {\r\n      const apiUrl = process.env.REACT_APP_API_URL;\r\n      const endpoint = searchQuery\r\n        ? `${apiUrl}/api/learning/search`\r\n        : `${apiUrl}/api/learning/courses`;\r\n\r\n      const response = await axios.get(endpoint, {\r\n        params: searchQuery ? { searchQuery } : { pageIndex: page, pageSize },\r\n      });\r\n\r\n      console.log(\"API Response:\", response.data);\r\n      setCourses(response.data.data.items || response.data.data);\r\n      setTotalPages(response.data.data.totalPages || 1);\r\n    } catch (error) {\r\n      console.error(\"Error fetching courses: \", error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const delayDebounceFn = setTimeout(() => {\r\n      fetchCourses();\r\n    }, 300);\r\n\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [searchQuery, page]);\r\n\r\n  return (\r\n    <div className=\"courses-container\">\r\n      <div className=\"pagination-search-wrapper\">\r\n        <div className=\"pagination\">\r\n          <button onClick={() => setPage(1)} disabled={page === 1}>\r\n            First\r\n          </button>\r\n          <button\r\n            onClick={() => setPage((prev) => Math.max(prev - 1, 1))}\r\n            disabled={page === 1}\r\n          >\r\n            Previous\r\n          </button>\r\n\r\n          {[...Array(totalPages)].map((_, i) => (\r\n            <button\r\n              key={i + 1}\r\n              onClick={() => setPage(i + 1)}\r\n              className={page === i + 1 ? \"active\" : \"\"}\r\n            >\r\n              {i + 1}\r\n            </button>\r\n          ))}\r\n\r\n          <button\r\n            onClick={() => setPage((prev) => Math.min(prev + 1, totalPages))}\r\n            disabled={page === totalPages}\r\n          >\r\n            Next\r\n          </button>\r\n          <button\r\n            onClick={() => setPage(totalPages)}\r\n            disabled={page === totalPages}\r\n          >\r\n            Last\r\n          </button>\r\n        </div>\r\n        <div className=\"search-container\">\r\n          <input\r\n            className=\"search-input\"\r\n            type=\"text\"\r\n            placeholder=\"Search courses...\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <h2 className=\"course-title\">Available Courses</h2>\r\n      <div className=\"courses-grid\">\r\n        {courses.map((course) => {\r\n          const isLocked = course.courseId > completedUnits+1;\r\n\r\n          return (\r\n            <div\r\n              key={course.courseId}\r\n              className={`course-card ${isLocked ? \"locked\" : \"\"}`}\r\n              onClick={() =>\r\n                !isLocked && navigate(`/courses/${course.courseId}`)\r\n              }\r\n            >\r\n              {isLocked && <span className=\"lock-icon\">ðŸ”’</span>}\r\n              <div className=\"course-content\">\r\n                <div className=\"course-index\">Unit {course.courseId}</div>\r\n                <div className=\"course-name\">{course.title}</div>\r\n                <div className=\"course-description\">{course.description}</div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}