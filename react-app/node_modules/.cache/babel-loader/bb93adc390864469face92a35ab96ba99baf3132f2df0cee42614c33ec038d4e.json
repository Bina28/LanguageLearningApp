{"ast":null,"code":"import{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import axios from\"axios\";import{motion}from\"framer-motion\";import{useUserProgress}from\"../UserProgressContext\";import\"./UserPage.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function UserPage(){const[user,setUser]=useState(null);const navigate=useNavigate();const{completedUnits,refreshProgress}=useUserProgress();useEffect(()=>{const userData=localStorage.getItem(\"user\");if(!userData){navigate(\"/login\");return;}try{const parsedUser=JSON.parse(userData);const fetchProfile=async()=>{try{const apiUrl=process.env.REACT_APP_API_URL;const response=await axios.get(\"\".concat(apiUrl,\"/api/auth/profile/\").concat(parsedUser.id));if(response.status===200){setUser(response.data);refreshProgress();}}catch(error){console.error(\"Error fetching user data:\",error);}};fetchProfile();}catch(error){navigate(\"/login\");}});const goToCourses=()=>{if(!user){console.error(\"User is null, cannot navigate to courses.\");return;}navigate(\"/usercourses\",{state:{id:user.id}});};if(!user)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading user data...\"});return/*#__PURE__*/_jsx(\"div\",{className:\"user-container\",children:/*#__PURE__*/_jsxs(motion.div,{className:\"user-card\",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:0.6},children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-pic\"}),/*#__PURE__*/_jsxs(\"h2\",{className:\"user-name\",children:[\"Welcome, \",user.fullName,\"!\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"user-email\",children:[\"Email: \",user.email]}),/*#__PURE__*/_jsxs(\"p\",{style:{color:\"white\"},children:[\"Completed Units: \",completedUnits]}),/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar-container\",children:/*#__PURE__*/_jsx(motion.div,{className:\"progress-bar\",style:{width:\"\".concat(completedUnits*10,\"%\")},initial:{width:0},animate:{width:\"\".concat(completedUnits*10,\"%\")},transition:{duration:0.8}})}),/*#__PURE__*/_jsx(\"button\",{onClick:goToCourses,className:\"my-coursesbtn\",children:\"See My Courses\"})]})});}","map":{"version":3,"names":["useState","useEffect","useNavigate","axios","motion","useUserProgress","jsx","_jsx","jsxs","_jsxs","UserPage","user","setUser","navigate","completedUnits","refreshProgress","userData","localStorage","getItem","parsedUser","JSON","parse","fetchProfile","apiUrl","process","env","REACT_APP_API_URL","response","get","concat","id","status","data","error","console","goToCourses","state","children","className","div","initial","opacity","y","animate","transition","duration","fullName","email","style","color","width","onClick"],"sources":["C:/Users/dyako/OneDrive/Skrivebord/StudyProjects/LanguageLearningApp/react-app/src/Components/UserPage/UserPage.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { motion } from \"framer-motion\";\r\nimport { useUserProgress } from \"../UserProgressContext\";\r\nimport \"./UserPage.css\"; \r\n\r\n\r\ninterface User {\r\n  id: number;\r\n  email: string;\r\n  fullName: string;\r\n}\r\n\r\nexport default function UserPage() {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const navigate = useNavigate();\r\n  const { completedUnits, refreshProgress } = useUserProgress();\r\n \r\n\r\n  useEffect(() => {\r\n    const userData = localStorage.getItem(\"user\");\r\n \r\n    if (!userData) {\r\n      navigate(\"/login\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const parsedUser: User = JSON.parse(userData);\r\n      \r\n\r\n      const fetchProfile = async () => {\r\n        try {\r\n          const apiUrl = process.env.REACT_APP_API_URL;\r\n          const response = await axios.get<User>(`${apiUrl}/api/auth/profile/${parsedUser.id}`);\r\n\r\n          if (response.status === 200) {\r\n            setUser(response.data);\r\n            refreshProgress();\r\n          }\r\n        } catch (error) {\r\n          console.error(\"Error fetching user data:\", error);\r\n        }\r\n      };\r\n\r\n      fetchProfile();\r\n    } catch (error) {\r\n      navigate(\"/login\");\r\n    }\r\n  }, );\r\n\r\n  const goToCourses = () => {\r\n    if (!user) {\r\n      console.error(\"User is null, cannot navigate to courses.\");\r\n      return;\r\n    }\r\n    navigate(\"/usercourses\", { state: {id: user.id } });\r\n};\r\n\r\n  if (!user) return <p>Loading user data...</p>;\r\n\r\n\r\n  return (\r\n    <div className=\"user-container\">\r\n      <motion.div \r\n        className=\"user-card\"\r\n        initial={{ opacity: 0, y: 50 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        transition={{ duration: 0.6 }}\r\n      >\r\n        <div className=\"profile-pic\"></div>\r\n        <h2 className=\"user-name\">Welcome, {user.fullName}!</h2>\r\n        <p className=\"user-email\">Email: {user.email}</p>\r\n        \r\n        <p style={{ color: \"white\" }}>Completed Units: {completedUnits}</p>\r\n        \r\n        <div className=\"progress-bar-container\">\r\n          <motion.div \r\n            className=\"progress-bar\"\r\n            style={{ width: `${completedUnits * 10}%` }}\r\n            initial={{ width: 0 }}\r\n            animate={{ width: `${completedUnits * 10}%` }}\r\n            transition={{ duration: 0.8 }}\r\n          />\r\n        </div>\r\n         <button onClick={goToCourses} className=\"my-coursesbtn\">See My Courses</button>\r\n      </motion.div>\r\n\r\n    \r\n    </div>\r\n  );\r\n \r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}